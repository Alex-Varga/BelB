{% assign enable = section.settings.enable %}
{% assign background_color = section.settings.background_color %}
{% assign text_color = section.settings.text_color %}
{% assign heading = section.settings.heading %}
{% assign subheading = section.settings.subheading %}
{% assign text = section.settings.text %}
{% assign list_id = section.settings.list_id %}
{% assign newsletter_button_text = section.settings.button_text %}
{% assign hint = section.settings.hint %}

{% if enable %}
	<section class="popup popup--open newsletter-popup js-popup"
			 style="--bg-color: {{ background_color }}; --text-color: {{ text_color }}"
	>
		<div class="popup__overlay js-close-popup"></div>

		<div class="popup__container newsletter-popup__container">
			<div class="popup__content newsletter-popup__content">
				<button class="newsletter-popup__close-button js-close-popup">
					{% include 'icon-close' %}
				</button>

				{% if heading != blank %}
					<h2 class="title newsletter-popup__title">
						{{ heading }}
					</h2>
				{% endif %}

				{% if subheading != blank %}
					<h3 class="title newsletter-popup__subtitle">
						{{ subheading }}
					</h3>
				{% endif %}

				{% if text != blank %}
					<h4 class="title newsletter-popup__text">
						{{ text }}
					</h4>
				{% endif %}

				{% if list_id != blank %}
					<div class="newsletter-popup__form-wrapper">
						{% include 'newsletter' %}
					</div>
				{% endif %}

				{% if hint != blank %}
					<div class="newsletter-popup__hint">
						{{ hint }}
					</div>
				{% endif %}
			</div>
		</div>
	</section>
{% endif %}

{% schema %}
{
	"name": "Newsletter Popup",
	"settings": [
		{
			"type": "checkbox",
			"id": "enable",
			"label": "Enable Popup"
		},
		{
			"type": "color",
			"id": "background_color",
			"label": "Background Color",
			"default": "#00A7E1"
		},
		{
			"type": "color",
			"id": "text_color",
			"label": "Text Color",
			"default": "#FFF"
		},
		{
			"type": "text",
			"id": "heading",
			"label": "Heading",
			"default": "First timer?"
		},
		{
			"type": "text",
			"id": "subheading",
			"label": "Subheading",
			"default": "20% off"
		},
		{
			"type": "richtext",
			"id": "text",
			"label": "Text",
			"default": "<p>& free shipping in your first order*</p>"
		},
		{
			"type": "header",
			"content": "Form"
		},
		{
			"type": "text",
			"id": "list_id",
			"label": "Klaviyo List Id"
		},
		{
			"type": "text",
			"id": "button_text",
			"label": "Button Text",
			"default": "Get the offer"
		},
		{
			"type": "richtext",
			"id": "hint",
			"label": "Hint",
			"default": "<p>* Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor ullamco laboris nisi.</p>"
		}
	]
}
{% endschema %}
